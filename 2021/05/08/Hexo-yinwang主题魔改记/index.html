<html>
<head>
	
    <style type="text/css"> img { max-width: 80%; } </style>

	<title>Hexo-yinwang主题魔改记</title>
	<meta name="keywords" content="" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css" />
    
        
<script src="/js/util.js"></script>

        <script>
            if(isMobile()) {
                loadjscssfile('/css/mobile.css', 'css');
            } else {
                loadjscssfile('/css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"/>
    
    


    <!-- fancybox support -->
    
    
    
<script src="/js/jquery.min.js"></script>

    
<link rel="stylesheet" href="/css/jquery.fancybox.min.css">

    
<script src="/js/jquery.fancybox.min.js"></script>

    
<script src="/js/fancybox.js"></script>


    
<meta name="generator" content="Hexo 5.4.0"></head>

<body>

<h2 class="title">Hexo-yinwang主题魔改记</h2>
<!--
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2021年5月8日




 </div>
-->
</div>

<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8hexo-addlink%E6%B7%BB%E5%8A%A0%E5%BA%95%E9%83%A8%E7%89%88%E6%9D%83%E7%94%B3%E6%98%8E"><span class="toc-text">使用hexo-addlink添加底部版权申明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Gitalk%E6%B7%BB%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD"><span class="toc-text">使用Gitalk添加评论功能</span></a></li></ol>
<h3 id="使用hexo-addlink添加底部版权申明"><a href="#使用hexo-addlink添加底部版权申明" class="headerlink" title="使用hexo-addlink添加底部版权申明"></a>使用hexo-addlink添加底部版权申明</h3><p>1.使用<code>Git bash</code>打开博客目录，输入<code>npm install hexo-addlink --save</code>安装addlink插件</p>
<p>2.编辑博客的<code>_config.yml</code>配置文件，尾部添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">addlink:</span><br><span class="line">  before_text: &lt;div&gt;&lt;ul class&#x3D;&quot;post-copyright&quot;&gt;&lt;li&gt;&lt;strong&gt;本文作者&lt;&#x2F;strong&gt;：hi2049&lt;&#x2F;li&gt;&lt;li&gt;&lt;strong&gt;本文链接&lt;&#x2F;strong&gt;：</span><br><span class="line">  after_text: &lt;&#x2F;li&gt;&lt;li class&#x3D;&quot;post-copyright-license&quot;&gt;&lt;strong&gt;版权声明：&lt;&#x2F;strong&gt;本博客所有文章除特别声明外，均采用 &lt;a href&#x3D;&quot;https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-nc-sa&#x2F;4.0&#x2F;deed.zh&quot; rel&#x3D;&quot;noopener&quot; target&#x3D;&quot;_blank&quot;&gt;&lt;i&gt;BY-NC-SA&lt;&#x2F;i&gt;&lt;&#x2F;a&gt; 许可协议。转载请注明出处！&lt;&#x2F;li&gt;&lt;&#x2F;ul&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>3.修改<code>\node_modules\hexo-addlink\index.js</code>中的<code>hrefText</code>变量为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var hrefText &#x3D;&#39;&lt;hr&#x2F;&gt;&#39;+beforeText + &#39;&lt;a href&#x3D;&quot;&#39; + href + &#39;&quot;&gt;&#39;+href+&#39;&lt;&#x2F;a&gt;&#39;  + afterText;</span><br></pre></td></tr></table></figure>

<p>4.修改主题目录下的<code>\source\css\_common\components\common.styl</code>，添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.post-copyright &#123;</span><br><span class="line">  background-color: #f9f9f9;</span><br><span class="line">  border-left: 3px solid #ff1700;</span><br><span class="line">  list-style: none;</span><br><span class="line">  margin: 2em 0 0;</span><br><span class="line">  padding: 0.5em 1em;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.使用<code>hexo cl</code>、<code>hexo g</code>重新生成页面即可</p>
<h3 id="使用Gitalk添加评论功能"><a href="#使用Gitalk添加评论功能" class="headerlink" title="使用Gitalk添加评论功能"></a>使用Gitalk添加评论功能</h3><blockquote>
<p>参考了<a target="_blank" rel="noopener" href="https://cuiqingcai.com/30010.html">https://cuiqingcai.com/30010.html</a>、<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/81270400">https://zhuanlan.zhihu.com/p/81270400</a></p>
</blockquote>
<p>1.注册<a target="_blank" rel="noopener" href="https://github.com/settings/applications/new">OAuth Application</a>，输入以下的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Application name ：任意都行</span><br><span class="line">Homepage URL ：博客地址</span><br><span class="line">Application description ：任意都行</span><br><span class="line">Authorization callback URL ：博客地址</span><br></pre></td></tr></table></figure>
<p>输入完成之后，点击注册就完成了。成功之后就会拿到Client ID和Client Secret，</p>
<p>2.在主题的<code>_config.yml</code>配置文件尾部添加以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gitalk: </span><br><span class="line">  client_id: 刚刚获得到的id</span><br><span class="line">  client_s: 刚刚获得到的secret</span><br><span class="line">  repo: 存储评论用的仓库</span><br><span class="line">  owner: 你的Github用户名</span><br><span class="line">  proxy: https:&#x2F;&#x2F;netnr-proxy.cloudno.de&#x2F;https:&#x2F;&#x2F;github.com&#x2F;login&#x2F;oauth&#x2F;access_token</span><br><span class="line">  admin: 你的Github用户名</span><br></pre></td></tr></table></figure>

<p>3.修改主题目录中的<code>\layout\_partial\article.ejs</code>，在最后的<code>&lt;% &#125; %&gt;</code>前面加上：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;cdnjs.cloudflare.com&#x2F;ajax&#x2F;libs&#x2F;gitalk&#x2F;1.2.2&#x2F;gitalk.min.css&quot;&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdnjs.cloudflare.com&#x2F;ajax&#x2F;libs&#x2F;gitalk&#x2F;1.2.2&#x2F;gitalk.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdnjs.cloudflare.com&#x2F;ajax&#x2F;libs&#x2F;blueimp-md5&#x2F;2.10.0&#x2F;js&#x2F;md5.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;section id&#x3D;&quot;comments&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;gitalk&quot; style&#x3D;&quot;width:80%;margin:auto;&quot;&gt;</span><br><span class="line">      &lt;div id&#x3D;&quot;gitalk-container&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">        var gitalk &#x3D; new Gitalk(&#123;</span><br><span class="line">          clientID: &#39;&lt;%- theme.gitalk.client_id %&gt;&#39;,</span><br><span class="line">          clientSecret: &#39;&lt;%-    theme.gitalk.client_s %&gt;&#39;,</span><br><span class="line">          repo: &#39;&lt;%- theme.gitalk.repo %&gt;&#39;,</span><br><span class="line">          owner: &#39;&lt;%- theme.gitalk.owner %&gt;&#39;,</span><br><span class="line">          proxy: &#39;&lt;%- theme.gitalk.proxy %&gt;&#39;,</span><br><span class="line">          admin: [&#39;&lt;%- theme.gitalk.admin %&gt;&#39;],</span><br><span class="line">          id: md5(location.pathname),      &#x2F;&#x2F; Ensure uniqueness and length less than 50</span><br><span class="line">          distractionFreeMode: false  &#x2F;&#x2F; Facebook-like distraction free mode          </span><br><span class="line">        &#125;)</span><br><span class="line">        gitalk.render(&#39;gitalk-container&#39;)</span><br><span class="line">      &lt;&#x2F;script&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;section&gt;</span><br></pre></td></tr></table></figure>

<p>4.使用<code>hexo cl</code>、<code>hexo g</code>重新生成页面即可</p>
<hr/><div><ul class="post-copyright"><li><strong>本文作者</strong>：hi2049</li><li><strong>本文链接</strong>：<a href="http://hi2049cn.github.io/2021/05/08/Hexo-yinwang主题魔改记/">http://hi2049cn.github.io/2021/05/08/Hexo-yinwang主题魔改记/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i>BY-NC-SA</i></a> 许可协议。转载请注明出处！</li></ul></div>

<!--<a href="http://hi2049cn.github.io/2021/05/08/Hexo-yinwang%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E8%AE%B0/#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->

<!--
<link rel="stylesheet" href="/css/gitalk.css">
<script src="/js/md5.min.js"></script>
<script src="/js/gitalk.min.js"></script>
-->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.2.2/gitalk.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.2.2/gitalk.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.10.0/js/md5.min.js"></script>


<section id="comments">
    <div class="gitalk" style="width:80%;margin:auto;">
      <div id="gitalk-container"></div>
      <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: 'c3e146ce2d00ca6661c7',
          clientSecret: '15d510de27b99abd67e311c45c133aec123f94a4',
          repo: 'hi2049blogcomment',
          owner: 'hi2049cn',
          proxy: '',
          admin: ['hi2049cn'],
          id: md5(location.pathname),      // Ensure uniqueness and length less than 50
          distractionFreeMode: false  // Facebook-like distraction free mode          
        })
        gitalk.render('gitalk-container')
      </script>
    </div>
  </section>






</body>
</html>